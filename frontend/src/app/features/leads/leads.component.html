<div class="leads-container">
  <div class="header">
    <h1>ניהול לידים</h1>
    <button class="btn btn-primary" (click)="addNewLead()">הוסף ליד חדש</button>
  </div>

  <div class="stats">
    <div class="stat-card">
      <h3>סה"כ לידים</h3>
      <p>{{ leadsCount() }}</p>
    </div>
    <div class="stat-card">
      <h3>חדש</h3>
      <p>{{ newLeadsCount() }}</p>
    </div>
    <div class="stat-card">
      <h3>בטיפול</h3>
      <p>{{ inProgressCount() }}</p>
    </div>
    <div class="stat-card">
      <h3>במעקב</h3>
      <p>{{ followUpCount() }}</p>
    </div>
    <div class="stat-card">
      <h3>לא מעוניין</h3>
      <p>{{ notInterestedCount() }}</p>
    </div>
  </div>

  <div class="table-container">
    <table class="leads-table">
      <thead>
        <tr>
          <th>שם</th>
          <th>אימייל</th>
          <th>טלפון</th>
          <th>מקור</th>
          <th>סטטוס</th>
          <th>תאריך יצירה</th>
          <th>הערות</th>
          <th>פעולות</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let lead of leads()" class="lead-row">
          <td>
            <div class="lead-name">
              <strong>{{ lead.firstName }} {{ lead.lastName }}</strong>
            </div>
          </td>
          <td>{{ lead.email || "-" }}</td>
          <td>{{ lead.phone || "-" }}</td>
          <td>{{ getSourceHebrew(lead.source) }}</td>
          <td>
            <span class="status-badge" [class]="'status-' + lead.status">
              {{ getStatusHebrew(lead.status) }}
            </span>
          </td>
          <td>{{ lead.createdAt | date : "shortDate" }}</td>
          <td>
            <div class="notes-cell">
              <span *ngIf="lead.notes" class="notes-text">
                {{ lead.notes | slice : 0 : 50
                }}{{ lead.notes.length > 50 ? "..." : "" }}
              </span>
              <span *ngIf="!lead.notes" class="no-notes"> אין הערות </span>
            </div>
          </td>
          <td>
            <div class="actions">
              <button
                class="btn btn-sm btn-secondary"
                (click)="editLead(lead.id)"
              >
                ערוך
              </button>
              <button
                class="btn btn-sm btn-danger"
                (click)="deleteLead(lead.id)"
              >
                מחק
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
